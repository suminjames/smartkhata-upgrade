
%div#filterrific_results
  %div.row
    %div.col-xs-12
      = submit_tag 'Send SMS', :type => 'button', class: 'btn btn-default', id: 'send-sms'
      = image_tag("ajax-loader.gif", class:"spinner-circular hidden ", id: 'send-email-spinner')
      = submit_tag 'Send Email', :type => 'button', class: 'btn btn-default', id: 'send-email'
      = image_tag("ajax-loader.gif", class:"spinner-circular hidden ", id: 'send-email-spinner')

  = render 'shared/pagination', collection_to_paginate: transaction_messages
  %div#transaction_message_list
    %table.table.table-striped
      %thead
        %th
          = check_box_tag 'select_all', '', false
          = 'All'
        %th.col-xs-1.text-center= filterrific_sorting_link(@filterrific, :date)
        %th.col-xs-2.text-center= 'Client'
        %th.col-xs-1.text-center= 'Bill'
        %th.col-xs-5.text-center= 'SMS Message'
        %th.col-xs-1.text-center= 'SMS<br>Sent'.html_safe
        %th.col-xs-1.text-center= 'Email<br>Sent'.html_safe
      %tbody
        -if transaction_messages
          -transaction_messages.each do |transaction_message|
            %tr
              %td
                = check_box_tag transaction_message.id
              %td= ad_to_bs_string(transaction_message.transaction_date)
              %td= transaction_message.client_account.name
              %td= "#{transaction_message.bill.fy_code}-#{transaction_message.bill.bill_number}" if transaction_message.bill.present?
              %td.sms-message= transaction_message.sms_message
              %td.text-center
                = transaction_message.sms_default? ? 'No': "Yes(#{transaction_message.sent_sms_count})"
                %br
              %td.text-center
                = transaction_message.email_default? ? 'No': "Yes(#{transaction_message.sent_email_count})"
                %br

    - if !transaction_messages || transaction_messages.empty?
      .row.text-center.top-buffer-md
        There are no matching transaction messages.

  = render 'shared/pagination', collection_to_paginate: transaction_messages
