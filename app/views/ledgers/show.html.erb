<p id="notice"><%= notice %></p>
<h3><%= @ledger.name.titleize %></h3>
<h4><%= "Opening Balance:  #{number_to_currency(@ledger.opening_blnc.abs)} #{@ledger.opening_blnc >= 0 ? 'dr': 'cr'}" %></h4>
<h4><%= "Closing Balance: #{number_to_currency(@ledger.closing_blnc.abs)} #{@ledger.closing_blnc >= 0 ? 'dr': 'cr'}" %></h4>

<br><br>
<% if @particulars.count > 0 %>
<div class= "box box-warning">
	<div class="box-body ledger">
	<table class="table">
		<tr>
			<th class="text-center">Date</th>
			<th class="text-center">Particulars</th>
			<th class="text-center">Bill</th>
			<th class="text-center">Pay / Receipt No</th>
			<th colspan=2>
				<div class="col-xs-12"><p class="text-center">Transaction Amount</p></div>
				<div class="col-xs-6"><p>Dr</p></div>
				<div class="col-xs-6"><p>Cr</p></div>
			</th>
			<th colspan=2>
				<div class="col-xs-12"><p class="text-center">Balance</p></div>
				<div class="col-xs-6"><p>Dr</p></div>
				<div class="col-xs-6"><p>Cr</p></div>
			</th>
		</tr>
		<colgroup>
			<col class="col-1">
			<col class="col-2">
			<col class="col-3">
			<col class="col-4">
			<col class="col-5">
			<col class="col-6">
			<col class="col-7">
			<col class="col-8">
		</colgroup>
		<% @particulars.each do |particular| %>
			<tr>
				<td><%= particular.date_bs %></td>
				<td><% name = particular.get_description 	 %><%= link_to name, voucher_path(particular.voucher, full: true) , remote: true %></td>
				<td>
          <!--TODO incorporate all bills -->
					<% if particular.bills.count > 0 %>
					<%= link_to "#{particular.bills.first.fy_code}-#{particular.bills.first.bill_number}", bill_path(particular.bills.first) , remote: true %>
					<% end %>
				</td>
				<td><%= link_to "#{particular.voucher.settlement.id }", settlement_path(particular.voucher.settlement.id) , remote: true if particular.voucher.settlement.present? %></td>
				<td class='text-right'><%= number_to_currency((particular.dr?) ? particular.amnt : "" ) %></td>
				<td class='text-right'><%= number_to_currency((particular.cr?)? particular.amnt : "" ) %></td>
				<td class='text-right'><%= number_to_currency(particular.running_blnc >= 0 ? particular.running_blnc : "" ) %></td>
				<td class='text-right'><%= number_to_currency(particular.running_blnc < 0 ? particular.running_blnc.abs : "" ) %></td>
			</tr>
		<% end %>
	</table>
</div>
</div>
<% end %>



<%= link_to 'Edit', edit_ledger_path(@ledger) %> |
<%= link_to 'Back', ledgers_path %>
