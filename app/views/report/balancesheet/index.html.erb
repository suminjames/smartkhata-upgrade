<% provide(:section_title, "Reports:Balance Sheet") %>
<% @cal = NepaliCalendar::Calendar.new
    # abort('asd')

    @date = @cal.ad_to_bs(Date.today.strftime("%Y").to_s, Date.today.strftime("%m").to_s, Date.today.strftime("%d").to_s)
%>

<h2 class="text-center"><%= current_tenant.full_name %></h2>
<h3 class="text-center">Balance Sheet</h3>
<h4 class="text-center">As on <%= @date.to_s %></h4>
<br><br>
<table class="table balancesheet-report">
  <tr>
    <td class='col-xs-6'>
      <div class="col-xs-6"><strong>Particulars</strong></div>
      <div class="col-xs-6 text-right"><strong>Amount(in Rs)</strong></div>
    </td>
    <td class='col-xs-6'>
      <div class="col-xs-6"><strong>Particulars</strong></div>
      <div class="col-xs-6 text-right"><strong>Amount(in Rs)</strong></div>
    </td>
  </tr>
  <tr>
    <td>
      <% @balance_cr.each do |name, hash| %>
        <%= render partial: 'report/balancesheet/group_balancesheet', locals: {name: name, hash: hash, credit: true} %>
      <% end %>
      <div class="col-xs-6">Opening Balance Difference</div>
      <div class="col-xs-6 text-right"><%= number_to_currency(@opening_balance_diff) %></div>
    </td>
    <td>
      <% @balance_dr.each do |name, hash| %>
          <%= render partial: 'report/balancesheet/group_balancesheet', locals: {name: name, hash: hash, credit: false} %>
      <% end %>
    </td>
  </tr>

  <tr>
    <td>
      <div class="col-xs-6"><strong>Total</strong></div>
      <div class="col-xs-6 text-right"><strong><%= number_to_currency(@opening_balance_cr> 0 ? @opening_balance_cr * -1 : @opening_balance_cr.abs) %></strong></div>

    </td>
    <td>
      <div class="col-xs-6"><strong>Total</strong></div>
      <div class="col-xs-6 text-right"><strong><%= number_to_currency(@opening_balance_dr) %></strong></div>
    </td>
  </tr>

</table>
